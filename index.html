<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>ğŸ² Ø¨Ø§Ø²ÛŒ Ø±ÙˆØ²Ù†Ø§Ù…Ú†Ù‡ - Ø¯Ú©Ø§Ù†Øª Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†</title>
<style>
  body {
    font-family: Tahoma, sans-serif;
    text-align: center;
    background: #fefefe;
    margin: 0; padding: 0;
  }
  h1 { margin: 10px; font-size: 20px; }
  #board { margin: 20px auto; display: grid; grid-template-columns: repeat(5, 60px); gap: 5px; }
  .cell {
    width: 60px; height: 60px;
    display: flex; align-items: center; justify-content: center;
    border: 1px solid #ddd; border-radius: 10px;
    font-size: 14px; position: relative;
  }
  .event { background: #ffeeba; }
  .finish { background: #c3e6cb; font-weight: bold; }
  .player {
    width: 22px; height: 22px; border-radius: 50%;
  }
  .p1 { background: blue; }
  .p2 { background: red; }
  button {
    padding: 14px 26px; font-size: 20px; margin-top: 15px; cursor: pointer;
    background: #007bff; color: #fff; border: none; border-radius: 12px;
  }
  #message { margin-top: 15px; font-size: 16px; }
  .final-screen { display:none; margin-top:30px; }
  .download-button {
    display:inline-block; padding:14px 28px; background:#28a745; color:#fff;
    text-decoration:none; border-radius:12px; font-weight:bold; font-size:18px;
  }
</style>
</head>
<body>
  <h1>ğŸ² Ø¨Ø§Ø²ÛŒ Ø±ÙˆØ²Ù†Ø§Ù…Ú†Ù‡</h1>
  <p>ØªØ§ Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ <b>Ù…ÙØ§Ø¯</b> Ø¨Ø§Ø²ÛŒ Ú©Ù†!</p>
  <div id="board"></div>
  <button id="roll-btn">ğŸ² Ù¾Ø±ØªØ§Ø¨ ØªØ§Ø³</button>
  <p id="message">Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† 1 Ø§Ø³Øª</p>

  <!-- Win Screen -->
  <div class="final-screen" id="final-screen">
    <h2>ØªØ¨Ø±ÛŒÚ© ğŸ‰</h2>
    <p>Ø´Ù…Ø§ Ø¯Ú©Ø§Ù† Ø®ÙˆØ¯ Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø±Ø¯ÛŒØ¯!  
    Ù‡Ù…ÛŒÙ† Ø­Ø§Ù„Ø§ <b>Ø±ÙˆØ²Ù†Ø§Ù…Ú†Ù‡</b> Ø±Ø§ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ù†ÛŒØ¯ Ùˆ Ø¯Ø± Ø²Ù†Ø¯Ú¯ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ù‡Ù… Ø¨Ø±Ù†Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯.</p>
    <a href="https://mld10sar.github.io/Esmat/app-release.apk" class="download-button" download>ğŸ“¥ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ù†Ø³Ø®Ù‡ Ú©Ø§Ù…Ù„</a>
  </div>

<script>
const board = document.getElementById("board");
const rollBtn = document.getElementById("roll-btn");
const msg = document.getElementById("message");
const finalScreen = document.getElementById("final-screen");

let size = 10; // 10 steps only
let cells = [];
let playerPos = [0, 0]; // p1, p2
let turn = 0; // 0 = p1, 1 = p2

// Create board
for (let i=0; i<size; i++) {
  const cell = document.createElement("div");
  cell.classList.add("cell");
  if (i === size-1) cell.classList.add("finish");
  if ([2,5,7].includes(i)) cell.classList.add("event");
  board.appendChild(cell);
  cells.push(cell);
}

function render() {
  cells.forEach(c => c.innerHTML = "");
  for (let p=0; p<2; p++) {
    const piece = document.createElement("div");
    piece.classList.add("player", p===0?"p1":"p2");
    cells[playerPos[p]].appendChild(piece);
  }
}

function handleEvent(pos) {
  if (pos===2) { msg.innerHTML="ğŸš« Ø§Ø¬Ù†Ø§Ø³ Ø®Ù„Ø§Øµ Ø´Ø¯! 1 Ø®Ø§Ù†Ù‡ Ø¹Ù‚Ø¨."; playerPos[turn]=Math.max(0,playerPos[turn]-1);}
  if (pos===5) { msg.innerHTML="ğŸ’¸ Ø¯Ø²Ø¯ÛŒ Ø´Ø¯! 2 Ø®Ø§Ù†Ù‡ Ø¹Ù‚Ø¨."; playerPos[turn]=Math.max(0,playerPos[turn]-2);}
  if (pos===7){ msg.innerHTML="âš¡ Ø±ÙˆØ²Ù†Ø§Ù…Ú†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯ â†’ Ø¬Ù„Ùˆ Ø±ÙØªÛŒØ¯!"; playerPos[turn]=Math.min(size-1,playerPos[turn]+2);}
}

rollBtn.addEventListener("click", () => {
  let dice = Math.floor(Math.random()*6)+1;
  msg.innerHTML=`Ø¨Ø§Ø²ÛŒÚ©Ù† ${turn+1} ØªØ§Ø³ Ø§Ù†Ø¯Ø§Ø®Øª: ${dice}`;
  playerPos[turn] = Math.min(size-1, playerPos[turn]+dice);
  
  handleEvent(playerPos[turn]);
  render();
  
  if (playerPos[turn]===size-1) {
    document.getElementById("board").style.display="none";
    rollBtn.style.display="none";
    msg.style.display="none";
    finalScreen.style.display="block";
    return;
  }
  
  turn = 1-turn; // switch turn
  setTimeout(()=>{msg.innerHTML=`Ù†ÙˆØ¨Øª Ø¨Ø§Ø²ÛŒÚ©Ù† ${turn+1} Ø§Ø³Øª`;},1000);
});

render();
</script>
</body>
</html>
